import{r as T,N as V,v as j,o as R,w as $,a as h,c as n,b as m,f as _,k as d,d as s,t as u,g as c,F as N,h as U,m as v,p as k,u as o,D as S,q as w,l as x,s as q,e as F,C as L,O,j as B}from"./app-8190fc74.js";import{_ as E}from"./PrimaryButton-ea2d3d80.js";import{_ as P,a as H}from"./Modal-41b4ce14.js";import{_ as I,a as M}from"./GreenButton-c0d2f63b.js";/* empty css                   *//* empty css                                                  */const D={class:"space-y-4"},G=["onSubmit"],K=s("h2",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"}," Nuevo resumen ",-1),z={class:"flex items-center mt-6"},J={key:0,class:"text-red-500 dark:text-red-200 underline"},W=s("div",{class:"flex text-center mt-6"},[s("p",{class:"text-gray-500 dark:text-gray-400"},"A que asignatura pertenecerá el resumen")],-1),Q={class:"mt-2 grid grid-cols-3 gap-2"},Y={id:"opciones2U",class:"mt-2 w-full"},Z={key:0,id:"carrera",class:"mt-2 w-full"},X={key:1,id:"asignatura",class:"mt-2 w-full"},ee={class:"flex items-center mt-6"},re={key:0,class:"text-sky-600 dark:text-gray-400"},te={key:0,class:"grid grid-cols-2 gap-8"},se={class:""},oe=["for"],ae={class:"relative rounded-md shadow-sm"},ie=["id","onFocus","onUpdate:modelValue"],de={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center cursor-progress text-gray-400"},ne={class:""},le=["for"],ue={class:"relative rounded-md shadow-sm select-none"},ce={key:0,class:"block w-full px-5 py-3 mt-2 text-white font-sans bg-black border border-sky-600 select-none rounded-lg dark:placeholder-gray-600 dark:bg-gray-200 dark:text-gray-800 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40 text-justify"},ge={class:"col-span-2"},me=["for"],fe={class:"relative rounded-md shadow-sm"},_e=["id","onFocus","onUpdate:modelValue","onKeyup"],ye={key:1},be={class:""},ve=["for"],ke={class:"relative rounded-md shadow-sm"},xe=["id","onFocus","onUpdate:modelValue","onKeyup"],pe={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center cursor-progress text-gray-400"},he={key:2,class:""},Se={class:"flex items-center my-2"},we={key:0,class:"text-red-500 dark:text-red-200 underline"},Ce={class:"flex items-center mt-2"},Ae={key:0,class:"text-sky-600 text-lg dark:text-gray-600"},Te={class:"mt-8"},Ve={class:"flex items-center mt-6"},je={key:0,class:"text-red-500 dark:text-red-200 underline"},Re=s("hr",{class:"border-2 border-sky-100 my-8"},null,-1),$e={class:"flex justify-end"},Be={__name:"CreatResumen",props:{show:Boolean,title:String,numberPermissions:Number,ValoresGenerarSeccion:Object,HijoSelec:Object},emits:["close"],setup(C,{emit:y}){const g=C,e=T({mostrarLoader:!1,restarAlToken:0,NumSujerencias:[],errorCarrera:[],campos:[{id:"nick",etiqueta:"Titulo del resumen",valor:[]},{id:"Resumen",etiqueta:V("Resumen"),valor:[]}],tipoTexto:"",campoActivo:null}),t=j({...Object.fromEntries(e.campos.map(a=>[a.id,[]])),materiaid:1,Portada:"Resumen",Resumen_integer:0,Introduccion_integer:0,Discusion_integer:0,Conclusiones_integer:0,Metodologia_integer:0,universidad_id:0,carrera_id:0,materia_id:0});R(()=>{let a;e.campos.forEach(i=>{a=i.id,e.NumSujerencias[a]=0,t.Resumen[0]="Texto de ejemplo. Seguido de mas texto de ejemplo"}),g.numberPermissions>9&&(t.nick[0]="Supernova: Cataclismos del Universo",t.Resumen[0]="Este resumen trata sobre uno de los procesos que mas energia emite del universo, tanto asi, que la luz emitida por una supernova compite con la luz que emite toda la galaxia")}),$(()=>{g.show&&(t.errors={})}),h(()=>e.universidadid,a=>{a.value!==0&&g.HijoSelec.carreras[1]&&(e.carreraid=g.HijoSelec.carreras[1])});function A(a){a&&a.respuesta&&(t[e.tipoTexto][1]=a.respuesta,t[e.tipoTexto][2]=t[e.tipoTexto][0],e.restarAlToken=a.restarAlToken,e.NumSujerencias[e.tipoTexto]++)}h(()=>g.ValoresGenerarSeccion,a=>{A(a)});const b=async(a,i)=>{if(a){e.errorCarrera=[],e.mostrarLoader=!0,e.tipoTexto=i;const f=5;L(a)>f||a.length>f*5?(t[e.tipoTexto][2]&&(t[e.tipoTexto][0]=t[e.tipoTexto][2]),O.reload({only:["ValoresGenerarSeccion"],data:{elTexto:a,materia:1}},{preserveScroll:!0,onSuccess:()=>{e.mostrarLoader=!1},onError:()=>alert(JSON.stringify(t.errors,null,4)),onFinish:()=>{e.mostrarLoader=!1}})):e.errorCarrera[i]="El resumen aun es muy corto",e.mostrarLoader=!1}},p=()=>{t.Resumen_integer=e.NumSujerencias.Resumen,t.universidad_id=e.universidadid,t.carrera_id=e.carreraid,t.materia_id=e.materiaid,t.post(route("Articulo.store"),{preserveScroll:!0,onSuccess:()=>{y("close"),t.reset()},onError:()=>alert(JSON.stringify(t.errors,null,4)),onFinish:()=>null})};return(a,i)=>{const f=B("v-select");return d(),n("section",D,[m(P,{show:g.show,onClose:i[7]||(i[7]=r=>y("close")),maxWidth:"3xl"},{default:_(()=>[s("form",{class:"p-6",onSubmit:F(p,["prevent"])},[K,s("div",z,[e.errorCarrera[0]?(d(),n("p",J,u(e.errorCarrera[0]),1)):c("",!0)]),W,s("div",Q,[s("div",Y,[m(f,{options:g.HijoSelec.universidades,label:"title",modelValue:e.universidadid,"onUpdate:modelValue":i[0]||(i[0]=r=>e.universidadid=r)},null,8,["options","modelValue"])]),e.universidadid&&e.universidadid.value!==0?(d(),n("div",Z,[m(f,{options:g.HijoSelec.carreras,label:"title",modelValue:e.carreraid,"onUpdate:modelValue":i[1]||(i[1]=r=>e.carreraid=r)},null,8,["options","modelValue"])])):c("",!0),e.carreraid&&e.carreraid.value!==0?(d(),n("div",X,[m(f,{options:g.HijoSelec.materias,label:"title",modelValue:e.materiaid,"onUpdate:modelValue":i[2]||(i[2]=r=>e.materiaid=r)},null,8,["options","modelValue"])])):c("",!0)]),s("div",ee,[e.restarAlToken&&e.restarAlToken!==0?(d(),n("p",re,"Se consumió: "+u(e.restarAlToken)+" token",1)):c("",!0)]),(d(!0),n(N,null,U(e.campos,r=>(d(),n("div",{key:r.id},[e.NumSujerencias[r.id]?(d(),n("div",te,[s("div",se,[s("label",{for:r.id,class:"text-gray-500 text-xl font-bold dark:text-gray-400 mb-2"},u(r.etiqueta),9,oe),s("div",ae,[v(s("textarea",{id:r.id+"0",onFocus:l=>e.campoActivo=r.id,rows:"8",cols:"33",onBlur:i[3]||(i[3]=l=>e.campoActivo=null),"onUpdate:modelValue":l=>o(t)[r.id][0]=l,disabled:"",class:"block w-full px-5 py-3 mt-2 bg-gray-50 text-gray-700 placeholder-gray-400 border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-100 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40 text-justify"},null,40,ie),[[k,o(t)[r.id][0]]]),e.campoActivo===r.id&&o(t)[r.id]&&o(t)[r.id][0]===""?(d(),n("div",de," Puede preguntar a la IA, haciendo click en Generar o Refinar ")):c("",!0)])]),s("div",ne,[s("label",{for:r.id,class:"text-gray-500 text-xl font-bold dark:text-gray-400 mb-2"},"Sugerencia "+u(r.etiqueta),9,le),s("div",ue,[o(t)[r.id]&&o(t)[r.id][1]?(d(),n("div",ce,u(o(t)[r.id][1]),1)):c("",!0)])]),s("div",ge,[s("label",{for:r.id,class:"text-gray-500 text-xl font-bold dark:text-gray-400 mb-2"},u(r.etiqueta)+" Final",9,me),s("div",fe,[v(s("textarea",{id:r.id+"2",onFocus:l=>e.campoActivo=r.id,rows:"6",cols:"33",onBlur:i[4]||(i[4]=l=>e.campoActivo=null),"onUpdate:modelValue":l=>o(t)[r.id][2]=l,placeholder:"Teniendo en cuenta la sugerencia de la IA...",onKeyup:S(l=>b(o(t)[r.id][2]?o(t)[r.id][2]:o(t)[r.id][0],r.id),["enter"]),class:"block w-full px-5 py-3 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40 text-justify"},null,40,_e),[[k,o(t)[r.id][2]]])])])])):(d(),n("div",ye,[s("div",be,[s("label",{for:r.id,class:"rounded-2xl px-10 text-gray-500 text-xl font-bold dark:text-gray-400 shadow-sm bg-gradient-to-r from-gray-50 via-gray-100 to-sky-100 mb-2"},u(r.etiqueta),9,ve),s("div",ke,[v(s("textarea",{id:r.id,onFocus:l=>e.campoActivo=r.id,rows:"4",cols:"33",onBlur:i[5]||(i[5]=l=>e.campoActivo=null),"onUpdate:modelValue":l=>o(t)[r.id][0]=l,onKeyup:S(l=>b(o(t)[r.id][2]?o(t)[r.id][2]:o(t)[r.id][0],r.id),["enter"]),class:"block w-full px-5 py-3 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40"},null,40,xe),[[k,o(t)[r.id][0]]]),e.campoActivo===r.id&&o(t)[r.id][0]===""?(d(),n("div",pe," Puede preguntar a la IA, haciendo click en Generar o Refinar ")):c("",!0)])])])),r.id==="Resumen"||r.id==="Introduccion"||r.id==="Metodologia"||r.id==="Discusion"||r.id==="Conclusiones"?(d(),n("div",he,[s("div",Se,[e.errorCarrera[0]?(d(),n("p",we,u(e.errorCarrera[0]),1)):c("",!0)]),s("div",Ce,[e.restarAlToken&&e.restarAlToken!==0?(d(),n("p",Ae,"Se consumió: "+u(e.restarAlToken)+" token",1)):c("",!0)]),m(I,{class:w([{"opacity-25":e.mostrarLoader},"ml-3 mt-1 px-10 py-3 outline outline-offset-2 ring-2 ring-green-700"]),disabled:e.mostrarLoader,onClick:l=>b(o(t)[r.id][2]?o(t)[r.id][2]:o(t)[r.id][0],r.id)},{default:_(()=>[x(u(e.mostrarLoader?"Revisando...":"Revisar"),1)]),_:2},1032,["class","disabled","onClick"]),s("div",Te,[e.mostrarLoader?(d(),q(M,{key:0})):c("",!0)]),s("div",Ve,[e.errorCarrera[r.id]?(d(),n("p",je,u(e.errorCarrera[r.id]),1)):c("",!0)])])):c("",!0),Re]))),128)),s("div",$e,[m(H,{disabled:o(t).processing,onClick:i[6]||(i[6]=r=>y("close"))},{default:_(()=>[x(u(a.lang().button.close),1)]),_:1},8,["disabled"]),m(E,{class:w(["ml-3",{"opacity-25":o(t).processing}]),disabled:o(t).processing,onClick:p},{default:_(()=>[x(u(o(t).processing?a.lang().button.add+"...":a.lang().button.add)+" resumen ",1)]),_:1},8,["class","disabled"])])],40,G)]),_:1},8,["show"])])}}};export{Be as default};
