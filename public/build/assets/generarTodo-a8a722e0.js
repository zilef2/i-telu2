import{r as E,v as I,o as F,w as N,c as _,b as l,f as V,k as c,d,t as g,u as s,m as A,y as R,q as p,F as G,h as w,g as v,l as h,s as O,e as B,O as q,bE as D}from"./app-8190fc74.js";import{_ as u}from"./InputError-1b18cc94.js";import{_ as m}from"./InputLabel-668bb308.js";import{_ as z,a as H}from"./Modal-41b4ce14.js";import{_ as J,a as P}from"./GreenButton-c0d2f63b.js";import{_ as K}from"./PrimaryButton-ea2d3d80.js";import{_ as b}from"./TextInput-100d83c4.js";import{_ as x}from"./SelectInput-1ca4357c.js";/* empty css                                                  */const Q={class:"space-y-6"},W=["onSubmit"],X={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},Y={class:"my-6 grid grid-cols-1 sm:grid-cols-8 md:grid-cols-8 gap-6"},Z={class:"sm:col-span-8 md:col-span-3"},ee={class:"sm:col-span-8 md:col-span-3"},ae={class:"sm:col-span-8 md:col-span-1"},re={class:"sm:col-span-8 md:col-span-1"},se={class:"my-6"},le={class:"my-6 grid grid-cols-1 sm:grid-cols-6 gap-6"},te={class:"col-span-6"},oe={class:"col-span-6"},ne={class:"col-span-6"},ie={key:1,class:"text-lg"},de={key:2,class:"text-lg text-red-600 my-4"},ue={class:"flex justify-end"},Ce={__name:"generarTodo",props:{show:Boolean,title:String,carrerasSelect:Object,MateriasRequisitoSelect:Object,ValoresGenerarMateria:Object},emits:["close"],setup(U,{emit:C}){const a=U,r=E({MateriasRequisitoSelect:[],HayMaterias:0,contadorRespuesta:0,vacia:"",recuerdeCodigo:"",mostrarLoader:!1}),e=I({nombre_mat:"",carrera_id:0,materia_id:0,objetivo:"",nombre_unidad:[[]],Cuantas_u:"2",Array_nombre_tema:[],Cuantas_t:"2",Array_RA:[[]],totalUT:11,errorCarrera:!1}),M=()=>{e.codigo_mat!=""?(r.errorCarrera="",e.post(route("materia.guardarGenerado"),{preserveScroll:!0,onSuccess:()=>{C("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})):r.errorCarrera="Falta el codigo de la materia"},j=()=>a.ValoresGenerarMateria=null,$=async()=>{r.errorCarrera="",L()&&(r.mostrarLoader=!0,q.reload({only:["ValoresGenerarMateria"],data:{unidades:e.Cuantas_u,temas:e.Cuantas_t,carrera_id:e.carrera_id,materia_id:e.materia_id}}))},L=()=>{if(e.carrera_id==0)return r.errorCarrera="Seleccione una carrera primero",!1;if(e.materia_id==0)return r.errorCarrera="Seleccione una materia primero",!1;let t=parseInt(e.Cuantas_u),n=parseInt(e.Cuantas_t),o=parseInt(e.totalUT);return t>9?(r.errorCarrera="Demasiadas unidades",!1):n>9?(r.errorCarrera="Demasiados tenas",!1):o>35?(r.errorCarrera="Los elementos generados deben ser menor a 35.",!1):t<1||n<1?(r.errorCarrera="Debe existir al menos un tema y una unidad",!1):!0};F(()=>{}),N(()=>{if(a.show&&(e.errors={},e.totalUT=1+parseInt(e.Cuantas_u)*(2*parseInt(e.Cuantas_t)+1),r.contadorRespuesta=0,a.ValoresGenerarMateria!=null)){console.log("ðŸ§ˆ debu props.ValoresGenerarMateria:",a.ValoresGenerarMateria),e.nombre_mat=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++,e.objetivo=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++;let t=parseInt(a.ValoresGenerarMateria.Cuantas_unidades);console.log("ðŸ§ˆ debu uni:",t);let n=parseInt(a.ValoresGenerarMateria.Cuantas_temas);console.log("ðŸ§ˆ debu tema:",n);for(let o=0;o<t;o++){e.nombre_unidad[o]=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++,e.Array_nombre_tema[o]=[],e.Array_RA[o]=[];for(let i=0;i<n;i++)e.Array_nombre_tema[o][i]=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++,e.Array_RA[o][i]=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++}setTimeout(()=>{r.mostrarLoader=!1,r.errorCarrera="",a.ValoresGenerarMateria.funciono?r.recuerdeCodigo="":r.recuerdeCodigo="Hubo error en la generacion de texto. intente otra vez"},900)}});let T=()=>{a.MateriasRequisitoSelect.length>0?r.MateriasRequisitoSelect=D(r.MateriasRequisitoSelect,a.MateriasRequisitoSelect,"una asignatura"):r.MateriasRequisitoSelect.unshift({label:"No hay asignaturas",value:0})};const k=()=>{if(r.errorCarrera="",e.carrera_id){let t=!1;q.reload({only:["MateriasRequisitoSelect"],data:{carrera_id_buscar:e.carrera_id},onSuccess:()=>{t=!0,r.MateriasRequisitoSelect=[]},onError:()=>{r.errorCarrera="Error al consultar materias",t=!1},onFinish:()=>{console.log("ðŸ§ˆ debu isSucces:",t),T()}})}else r.errorCarrera="Seleccione una carrera"};return(t,n)=>(c(),_("section",Q,[l(z,{show:a.show,onClose:n[7]||(n[7]=o=>C("close"))},{default:V(()=>[d("form",{id:"generarTodo",class:"p-6",onSubmit:B(M,["prevent"])},[d("h2",X," GeneraciÃ³n de "+g(a.title),1),d("div",Y,[d("div",Z,[l(m,{for:"carrera_id",value:t.lang().label.carrera,class:"my-3"},null,8,["value"]),l(x,{onChange:k,name:"carrera_id",class:"mt-1 block w-full",modelValue:s(e).carrera_id,"onUpdate:modelValue":n[0]||(n[0]=o=>s(e).carrera_id=o),required:"",dataSet:a.carrerasSelect},null,8,["modelValue","dataSet"]),l(u,{class:"mt-2",message:s(e).errors.carrera_id},null,8,["message"])]),d("div",ee,[l(m,{for:"materia_id",value:t.lang().label.materia,class:"my-3"},null,8,["value"]),l(x,{name:"materia_id",class:"mt-1 block w-full",modelValue:s(e).materia_id,"onUpdate:modelValue":n[1]||(n[1]=o=>s(e).materia_id=o),required:"",dataSet:r.MateriasRequisitoSelect},null,8,["modelValue","dataSet"]),l(u,{class:"mt-2",message:s(e).errors.materia_id},null,8,["message"])]),d("div",ae,[l(m,{for:"Cuantas_u",value:t.lang().label.Cuantas_unidades,class:"text-sm"},null,8,["value"]),l(b,{name:"Cuantas_u",type:"number",min:"1",max:"9",class:"mt-1 block w-full",modelValue:s(e).Cuantas_u,"onUpdate:modelValue":n[2]||(n[2]=o=>s(e).Cuantas_u=o)},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(e).errors.Cuantas_u},null,8,["message"])]),d("div",re,[l(m,{for:"Cuantas_t",value:t.lang().label.Cuantas_temas+" por unidad",class:"text-sm"},null,8,["value"]),l(b,{name:"Cuantas_t",type:"number",min:"1",max:"9",class:"mt-1 block w-full",modelValue:s(e).Cuantas_t,"onUpdate:modelValue":n[3]||(n[3]=o=>s(e).Cuantas_t=o)},null,8,["modelValue"]),l(u,{class:"mt-2",message:s(e).errors.Cuantas_t},null,8,["message"])])]),d("p",se,"Elementos generados: "+g(s(e).totalUT),1),A(d("div",le,[d("div",te,[l(m,{for:"nombre_mat",value:t.lang().label.nombre_mat},null,8,["value"]),l(b,{id:"nombre_mat",type:"text",modelValue:s(e).nombre_mat,"onUpdate:modelValue":n[4]||(n[4]=o=>s(e).nombre_mat=o),required:"",placeholder:t.lang().placeholder.nombre_mat,error:s(e).errors.nombre_mat,class:p([a!=null&&a.ValoresGenerarMateria?"bg-gray-50":"bg-gray-300 invisible","text-center text-2xl mt-1 block w-full"])},null,8,["modelValue","placeholder","error","class"]),l(u,{class:"mt-2",message:s(e).errors.nombre_mat},null,8,["message"])]),d("div",oe,[l(m,{for:"",value:t.lang().label.objetivo},null,8,["value"]),l(b,{id:"objetivo",type:"text",modelValue:s(e).objetivo,"onUpdate:modelValue":n[5]||(n[5]=o=>s(e).objetivo=o),required:"",placeholder:t.lang().placeholder.objetivo,class:p([a!=null&&a.ValoresGenerarMateria?"bg-gray-50":"bg-gray-300 invisible","mt-1 block w-full"])},null,8,["modelValue","placeholder","class"]),l(u,{class:"mt-2",message:s(e).errors.objetivo},null,8,["message"])])],512),[[R,a==null?void 0:a.ValoresGenerarMateria]]),a!=null&&a.ValoresGenerarMateria&&(a!=null&&a.ValoresGenerarMateria.funciono)?(c(!0),_(G,{key:0},w(s(e).nombre_unidad.length,(o,i)=>(c(),_("div",{key:i,class:"my-6 grid grid-cols-1 sm:grid-cols-6 gap-6"},[d("div",ne,[l(m,{for:"nombre_unidad"+i,value:" ---- "+t.lang().label.nombre_unidad+" "+(i+1)+" ---- ",class:"text-xl my-2 text-center"},null,8,["for","value"]),l(b,{id:"nombre_unidad"+i,type:"text",modelValue:s(e).nombre_unidad[i],"onUpdate:modelValue":S=>s(e).nombre_unidad[i]=S,required:"",placeholder:t.lang().placeholder.nombre_unidad,class:p([a!=null&&a.ValoresGenerarMateria?"bg-gray-50":"bg-gray-300 disabled","mt-1 block w-full text-center"])},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"]),l(u,{class:"mt-2",message:s(e).errors.nombre_unidad},null,8,["message"])]),(c(!0),_(G,null,w(s(e).Array_nombre_tema[i],(S,f)=>(c(),_("div",{key:f,class:"col-span-3"},[l(m,{for:"Array_nombre_tema",value:t.lang().label.Array_nombre_tema+" "+(i*s(e).Array_nombre_tema.length+(f+1))},null,8,["value"]),l(b,{id:"Array_nombre_tema",type:"text",class:"mt-1 block w-full",modelValue:s(e).Array_nombre_tema[i][f],"onUpdate:modelValue":y=>s(e).Array_nombre_tema[i][f]=y,required:"",placeholder:t.lang().placeholder.Array_nombre_tema},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(u,{class:"mt-2",message:s(e).errors.Array_nombre_tema},null,8,["message"]),l(m,{for:"Array_RA",value:t.lang().label.Array_RA,class:"mt-3"},null,8,["value"]),l(b,{id:"Array_RA",type:"text",class:"mt-2 block w-full",modelValue:s(e).Array_RA[i][f],"onUpdate:modelValue":y=>s(e).Array_RA[i][f]=y,required:"",placeholder:t.lang().placeholder.Array_RA},null,8,["modelValue","onUpdate:modelValue","placeholder"]),l(u,{class:"mt-2",message:s(e).errors.Array_RA},null,8,["message"])]))),128))]))),128)):v("",!0),r.recuerdeCodigo?(c(),_("p",ie,g(r.recuerdeCodigo),1)):v("",!0),r.errorCarrera?(c(),_("p",de,g(r.errorCarrera),1)):v("",!0),d("div",ue,[l(H,{disabled:s(e).processing,onClick:n[6]||(n[6]=o=>(C("close"),s(e).reset(),j()))},{default:V(()=>[h(g(t.lang().button.close),1)]),_:1},8,["disabled"]),A(l(K,{class:p(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing,onClick:M},{default:V(()=>[h(g(s(e).processing?"Guardar...":"Guardar"),1)]),_:1},8,["class","disabled"]),[[R,a==null?void 0:a.ValoresGenerarMateria]]),l(J,{class:p(["ml-3",{"opacity-25":r.mostrarLoader}]),disabled:r.mostrarLoader,onClick:$},{default:V(()=>[h(g(r.mostrarLoader?"Pensando...":"Generar"),1)]),_:1},8,["class","disabled"]),r.mostrarLoader?(c(),O(P,{key:0})):v("",!0)])],40,W)]),_:1},8,["show"])]))}};export{Ce as default};
