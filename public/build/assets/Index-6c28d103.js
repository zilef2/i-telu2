import{z as N,k as q,J as E,l as z,O as x,A as F,f as p,a as r,u as d,w as i,F as _,p as L,o,X as Y,b as t,q as b,s as S,d as C,t as f,c as u,g as h,x as I,B as J,y as R}from"./app-fa012e40.js";import{_ as X,S as G,q as H,h as O,U as K,Y as Q}from"./AuthenticatedLayout-e4269cae.js";import{_ as W}from"./Breadcrumb-a1f90ab0.js";import{_ as Z}from"./TextInput-a37ed436.js";import{_ as ee}from"./PrimaryButton-f0e54c8a.js";import{_ as M}from"./SelectInput-d6ecf7ad.js";import{_ as $}from"./DangerButton-83083e16.js";import{_ as te}from"./Pagination-2b288850.js";import{T as U,a as se,P as ae,o as le}from"./index-3cb9eb1b.js";import re from"./Create-b350532e.js";import oe from"./Edit-dd5b920b.js";import ne from"./Delete-6eaf46e8.js";import de from"./DeleteBulk-88269513.js";import{_ as ie}from"./Checkbox-43286906.js";import{_ as D}from"./InfoButton-44b47ffa.js";import{v as ce}from"./global-f5954534.js";import"./index-5d8dae98.js";import"./InputError-bab8a326.js";import"./InputLabel-0db2c892.js";import"./SecondaryButton-8bd0ef43.js";const pe={class:"space-y-4"},me={class:"px-4 sm:px-0"},ue={class:"rounded-lg overflow-hidden w-fit"},fe={class:"relative bg-white dark:bg-gray-800 shadow sm:rounded-lg"},be={class:"flex justify-between p-2"},he={class:"flex space-x-2"},ye={class:"bg-gray-100"},ge={key:0,class:"mx-3 bg-white dark:bg-black"},ve={class:"overflow-x-auto scrollbar-table"},_e={class:"w-full"},ke={class:"uppercase text-sm border-t border-gray-200 dark:border-gray-700"},we={class:"dark:bg-gray-900 text-left"},xe={class:"px-2 py-4 text-center"},Se=["onClick"],Ce={key:0,class:"flex justify-between items-center"},Ie={key:1,class:"flex justify-between items-center"},Oe={class:"whitespace-nowrap py-4 px-2 sm:py-3 text-center"},Me=["value"],$e={key:0,class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ue={class:"flex justify-start items-center"},De={class:"rounded-md overflow-hidden"},je={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Ve={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Be={class:"whitespace-nowrap py-4 px-2 sm:py-3"},Pe={class:"flex justify-betwween items-center p-2 border-t border-gray-200 dark:border-gray-700"},Te=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ae={class:"fixed inset-0 overflow-y-auto"},Ne={class:"flex min-h-full items-center justify-center p-4 text-center"},qe=t("div",{class:"mt-2"},[t("p",{class:"text-sm text-gray-500"}," Esta unidad no tiene temas inscritos ")],-1),ot={__name:"Index",props:{title:String,filters:Object,breadcrumbs:Object,perPage:Number,fromController:Object,nombresTabla:Array,MateriasSelect:Object,numberPermissions:Number,selectedMatID:Object,MateriasSelect:Object,showCarrera:Object},setup(c){const n=c,v=N(!1);function k(){v.value=!1}const{_:j,debounce:V,pickBy:w}=L,e=q({params:{search:n.filters.search,field:n.filters.field,order:n.filters.order,perPage:n.perPage,selectedMatID:n.filters.selectedMatID},params2:{selectedUnidadID:0},selectedId:[],multipleSelect:!1,createOpen:!1,editOpen:!1,deleteOpen:!1,deleteBulkOpen:!1,generico:null,MateriasSelect:null,dataSet:E().props.app.perpage}),B=(l,s)=>{if(s>0){e.params2.selectedUnidadID=l;let m=w(e.params2);x.get(route("subtopico.index"),m,{replace:!0,preserveState:!0,preserveScroll:!0})}else v.value=!0},P=l=>{console.log("ðŸ§ˆ debu field:",l),e.params.field=l.replace(/ /g,"_"),e.params.order=e.params.order==="asc"?"desc":"asc"};z(()=>j.cloneDeep(e.params),V(()=>{let l=w(e.params);x.get(route("Unidad.index"),l,{replace:!0,preserveState:!0,preserveScroll:!0})},150));const T=l=>{var s;l.target.checked===!1?e.selectedId=[]:(s=n.fromController)==null||s.data.forEach(m=>{e.selectedId.push(m.id)})},A=()=>{var l;((l=n.fromController)==null?void 0:l.data.length)==e.selectedId.length?e.multipleSelect=!0:e.multipleSelect=!1};return F(()=>{typeof e.params.selectedMatID>"u"&&(e.params.selectedMatID=0),e.params.selectedMatID===null&&(e.params.selectedMatID=0),e.MateriasSelect=ce(e.MateriasSelect,n.MateriasSelect,"una materia")}),(l,s)=>{const m=R("tooltip");return o(),p(_,null,[r(d(Y),{title:n.title},null,8,["title"]),r(X,null,{default:i(()=>[r(W,{title:c.title,breadcrumbs:c.breadcrumbs},null,8,["title","breadcrumbs"]),t("div",pe,[t("div",me,[t("div",ue,[b(r(ee,{class:"rounded-none",onClick:s[0]||(s[0]=a=>e.createOpen=!0)},{default:i(()=>[C(f(l.lang().button.add),1)]),_:1},512),[[S,l.can(["create Unidad"])]]),l.can(["create Unidad"])?(o(),u(re,{key:0,show:e.createOpen,onClose:s[1]||(s[1]=a=>e.createOpen=!1),title:n.title,MateriasSelect:e.MateriasSelect},null,8,["show","title","MateriasSelect"])):h("",!0),l.can(["update Unidad"])?(o(),u(oe,{key:1,show:e.editOpen,onClose:s[2]||(s[2]=a=>e.editOpen=!1),Unidad:e.generico,title:n.title,MateriasSelect:e.MateriasSelect},null,8,["show","Unidad","title","MateriasSelect"])):h("",!0),l.can(["delete Unidad"])?(o(),u(ne,{key:2,show:e.deleteOpen,onClose:s[3]||(s[3]=a=>e.deleteOpen=!1),Unidad:e.generico,title:n.title},null,8,["show","Unidad","title"])):h("",!0),r(de,{show:e.deleteBulkOpen,onClose:s[4]||(s[4]=a=>(e.deleteBulkOpen=!1,e.multipleSelect=!1,e.selectedId=[])),selectedId:e.selectedId,title:n.title},null,8,["show","selectedId","title"])])]),t("div",fe,[t("div",be,[t("div",he,[r(M,{modelValue:e.params.perPage,"onUpdate:modelValue":s[5]||(s[5]=a=>e.params.perPage=a),dataSet:e.dataSet},null,8,["modelValue","dataSet"]),b((o(),u($,{onClick:s[6]||(s[6]=a=>e.deleteBulkOpen=!0),class:"px-3 py-1.5"},{default:i(()=>[r(d(U),{class:"w-5 h-5"})]),_:1})),[[S,e.selectedId.length!=0],[m,l.lang().tooltip.delete_selected]]),t("div",ye,[r(M,{modelValue:e.params.selectedMatID,"onUpdate:modelValue":s[7]||(s[7]=a=>e.params.selectedMatID=a),id:"uni",dataSet:e.MateriasSelect},null,8,["modelValue","dataSet"]),c.showCarrera?(o(),p("small",ge,f(c.showCarrera.nombre),1)):h("",!0)])]),n.numberPermissions>1?(o(),u(Z,{key:0,modelValue:e.params.search,"onUpdate:modelValue":s[8]||(s[8]=a=>e.params.search=a),type:"text",class:"block w-3/6 md:w-2/6 lg:w-1/6 rounded-lg",placeholder:l.lang().placeholder.search},null,8,["modelValue","placeholder"])):h("",!0)]),t("div",ve,[t("table",_e,[t("thead",ke,[t("tr",we,[t("th",xe,[r(ie,{checked:e.multipleSelect,"onUpdate:checked":s[9]||(s[9]=a=>e.multipleSelect=a),onChange:T},null,8,["checked"])]),(o(!0),p(_,null,I(c.nombresTabla[0],(a,y)=>(o(),p("th",{key:y,onClick:g=>P(c.nombresTabla[2][y]),class:"px-2 py-4 cursor-pointer hover:bg-sky-50 dark:hover:bg-sky-800"},[c.nombresTabla[2][y]!==null?(o(),p("div",Ce,[t("span",null,f(a),1),r(d(se),{class:"w-4 h-4"})])):(o(),p("div",Ie,[t("span",null,f(a),1)]))],8,Se))),128))])]),t("tbody",null,[(o(!0),p(_,null,I(c.fromController.data,(a,y)=>(o(),p("tr",{key:y,class:"border-t border-gray-200 dark:border-gray-700 hover:bg-gray-200/30 hover:dark:bg-gray-900/20"},[t("td",Oe,[b(t("input",{type:"checkbox",onChange:A,value:a.id,"onUpdate:modelValue":s[10]||(s[10]=g=>e.selectedId=g),class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary"},null,40,Me),[[J,e.selectedId]])]),c.numberPermissions>1?(o(),p("td",$e,[t("div",Ue,[t("div",De,[b((o(),u(D,{type:"button",onClick:g=>(e.editOpen=!0,e.generico=a),class:"px-2 py-1.5 rounded-none"},{default:i(()=>[r(d(ae),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[m,l.lang().tooltip.edit]]),b((o(),u($,{type:"button",onClick:g=>(e.deleteOpen=!0,e.generico=a),class:"px-2 py-1.5 rounded-none"},{default:i(()=>[r(d(U),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[m,l.lang().tooltip.delete]]),b((o(),u(D,{type:"button",onClick:g=>B(a.id,a.cuantosTemas),class:"px-2 py-1.5 rounded-none"},{default:i(()=>[r(d(le),{class:"w-4 h-4"})]),_:2},1032,["onClick"])),[[m,"Ver temas"]])])])])):h("",!0),t("td",je,f(a.enum),1),t("td",Ve,f(a.nombre),1),t("td",Be,f(a.hijo),1)]))),128))])])]),t("div",Pe,[r(te,{links:n.fromController,filters:e.params},null,8,["links","filters"])])])]),t("template",null,[r(d(G),{appear:"",show:v.value,as:"template"},{default:i(()=>[r(d(H),{as:"div",onClose:k,class:"relative z-10"},{default:i(()=>[r(d(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[Te]),_:1}),t("div",Ae,[t("div",Ne,[r(d(O),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:i(()=>[r(d(K),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:i(()=>[r(d(Q),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:i(()=>[C(" Sin temas ")]),_:1}),qe,t("div",{class:"mt-4"},[t("button",{type:"button",class:"inline-flex justify-center rounded-md border border-transparent bg-blue-100 px-4 py-2 text-sm font-medium text-blue-900 hover:bg-blue-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2",onClick:k}," Listo ")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])])]),_:1})],64)}}};export{ot as default};
