import{A as T,o as c,c as _,z as I,r as N,v as E,i as F,w as O,a as t,b as V,d,t as g,u as s,j as R,k as w,n as v,F as x,g as G,m as C,e as S,l as D,f as z,O as q}from"./app-6467c706.js";import{_ as u}from"./InputError-0260cbdd.js";import{_ as m}from"./InputLabel-04b443e6.js";import{_ as H,a as J}from"./SecondaryButton-b7ca80cc.js";import{_ as P}from"./PrimaryButton-037173fe.js";import{_ as b}from"./TextInput-d4362326.js";import{_ as U}from"./SelectInput-a92191a9.js";import{v as K}from"./global-8f2c086a.js";const Q=T('<div class="loader"><svg viewBox="0 0 80 80"><circle id="test" cx="40" cy="40" r="32"></circle></svg></div><div class="loader triangle"><svg viewBox="0 0 86 80"><polygon points="43 8 79 72 7 72"></polygon></svg></div><div class="loader"><svg viewBox="0 0 80 80"><rect x="8" y="8" width="64" height="64"></rect></svg></div>',3),W={__name:"Generando",props:{type:{type:String,default:"button"}},setup(y){return(f,a)=>Q}},X=["type"],Y={__name:"GreenButton",props:{type:{type:String,default:"button"}},setup(y){return(f,a)=>(c(),_("button",{type:y.type,class:"inline-flex items-center px-4 py-2 bg-emerald-600 dark:bg-gray-800 border border-sky-300 dark:border-white rounded-md font-semibold text-xs text-white dark:text-white uppercase tracking-widest shadow-sm hover:bg-emerald-400 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-gray-800 disabled:opacity-25 transition ease-in-out duration-150"},[I(f.$slots,"default")],8,X))}},Z={class:"space-y-6"},ee=["onSubmit"],ae={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},re={class:"my-6 grid grid-cols-1 sm:grid-cols-8 md:grid-cols-8 gap-6"},se={class:"sm:col-span-8 md:col-span-3"},te={class:"sm:col-span-8 md:col-span-3"},le={class:"sm:col-span-8 md:col-span-1"},oe={class:"sm:col-span-8 md:col-span-1"},ne={class:"my-6"},ie={class:"my-6 grid grid-cols-1 sm:grid-cols-6 gap-6"},de={class:"col-span-6"},ue={class:"col-span-6"},me={class:"col-span-6"},ce={key:1,class:"text-lg"},_e={key:2,class:"text-lg text-red-600 my-4"},ge={class:"flex justify-end"},Se={__name:"generarTodo",props:{show:Boolean,title:String,carrerasSelect:Object,MateriasRequisitoSelect:Object,ValoresGenerarMateria:Object},emits:["close"],setup(y,{emit:f}){const a=y,r=N({MateriasRequisitoSelect:[],HayMaterias:0,contadorRespuesta:0,vacia:"",recuerdeCodigo:"",mostrarLoader:!1}),e=E({nombre_mat:"",carrera_id:0,materia_id:0,objetivo:"",nombre_unidad:[[]],Cuantas_u:"2",Array_nombre_tema:[],Cuantas_t:"2",Array_RA:[[]],totalUT:11,errorCarrera:!1}),M=()=>{e.codigo_mat!=""?(r.errorCarrera="",e.post(route("materia.guardarGenerado"),{preserveScroll:!0,onSuccess:()=>{f("close"),e.reset()},onError:()=>alert(JSON.stringify(e.errors,null,4)),onFinish:()=>null})):r.errorCarrera="Falta el codigo de la materia"},j=()=>a.ValoresGenerarMateria=null,k=async()=>{r.errorCarrera="",$()&&(r.mostrarLoader=!0,q.reload({only:["ValoresGenerarMateria"],data:{unidades:e.Cuantas_u,temas:e.Cuantas_t,carrera_id:e.carrera_id,materia_id:e.materia_id}}))},$=()=>{if(e.carrera_id==0)return r.errorCarrera="Seleccione una carrera primero",!1;if(e.materia_id==0)return r.errorCarrera="Seleccione una materia primero",!1;let l=parseInt(e.Cuantas_u),n=parseInt(e.Cuantas_t),o=parseInt(e.totalUT);return l>9?(r.errorCarrera="Demasiadas unidades",!1):n>9?(r.errorCarrera="Demasiados tenas",!1):o>35?(r.errorCarrera="Los elementos generados deben ser menor a 35.",!1):l<1||n<1?(r.errorCarrera="Debe existir al menos un tema y una unidad",!1):!0};F(()=>{}),O(()=>{if(a.show&&(e.errors={},e.totalUT=1+parseInt(e.Cuantas_u)*(2*parseInt(e.Cuantas_t)+1),r.contadorRespuesta=0,a.ValoresGenerarMateria!=null)){console.log("ðŸ§ˆ debu props.ValoresGenerarMateria:",a.ValoresGenerarMateria),e.nombre_mat=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++,e.objetivo=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++;let l=parseInt(a.ValoresGenerarMateria.Cuantas_unidades);console.log("ðŸ§ˆ debu uni:",l);let n=parseInt(a.ValoresGenerarMateria.Cuantas_temas);console.log("ðŸ§ˆ debu tema:",n);for(let o=0;o<l;o++){e.nombre_unidad[o]=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++,e.Array_nombre_tema[o]=[],e.Array_RA[o]=[];for(let i=0;i<n;i++)e.Array_nombre_tema[o][i]=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++,e.Array_RA[o][i]=a==null?void 0:a.ValoresGenerarMateria.respuesta[r.contadorRespuesta],r.contadorRespuesta++}setTimeout(()=>{r.mostrarLoader=!1,r.errorCarrera="",a.ValoresGenerarMateria.funciono?r.recuerdeCodigo="":r.recuerdeCodigo="Hubo error en la generacion de texto. intente otra vez"},900)}});let B=()=>{a.MateriasRequisitoSelect.length>0?r.MateriasRequisitoSelect=K(r.MateriasRequisitoSelect,a.MateriasRequisitoSelect,"una asignatura"):r.MateriasRequisitoSelect.unshift({label:"No hay asignaturas",value:0})};const L=()=>{if(r.errorCarrera="",e.carrera_id){let l=!1;q.reload({only:["MateriasRequisitoSelect"],data:{carrera_id_buscar:e.carrera_id},onSuccess:()=>{l=!0,r.MateriasRequisitoSelect=[]},onError:()=>{r.errorCarrera="Error al consultar materias",l=!1},onFinish:()=>{console.log("ðŸ§ˆ debu isSucces:",l),B()}})}else r.errorCarrera="Seleccione una carrera"};return(l,n)=>(c(),_("section",Z,[t(H,{show:a.show,onClose:n[7]||(n[7]=o=>f("close"))},{default:V(()=>[d("form",{id:"generarTodo",class:"p-6",onSubmit:z(M,["prevent"])},[d("h2",ae," GeneraciÃ³n de "+g(a.title),1),d("div",re,[d("div",se,[t(m,{for:"carrera_id",value:l.lang().label.carrera,class:"my-3"},null,8,["value"]),t(U,{onChange:L,name:"carrera_id",class:"mt-1 block w-full",modelValue:s(e).carrera_id,"onUpdate:modelValue":n[0]||(n[0]=o=>s(e).carrera_id=o),required:"",dataSet:a.carrerasSelect},null,8,["modelValue","dataSet"]),t(u,{class:"mt-2",message:s(e).errors.carrera_id},null,8,["message"])]),d("div",te,[t(m,{for:"materia_id",value:l.lang().label.materia,class:"my-3"},null,8,["value"]),t(U,{name:"materia_id",class:"mt-1 block w-full",modelValue:s(e).materia_id,"onUpdate:modelValue":n[1]||(n[1]=o=>s(e).materia_id=o),required:"",dataSet:r.MateriasRequisitoSelect},null,8,["modelValue","dataSet"]),t(u,{class:"mt-2",message:s(e).errors.materia_id},null,8,["message"])]),d("div",le,[t(m,{for:"Cuantas_u",value:l.lang().label.Cuantas_unidades,class:"text-sm"},null,8,["value"]),t(b,{name:"Cuantas_u",type:"number",min:"1",max:"9",class:"mt-1 block w-full",modelValue:s(e).Cuantas_u,"onUpdate:modelValue":n[2]||(n[2]=o=>s(e).Cuantas_u=o)},null,8,["modelValue"]),t(u,{class:"mt-2",message:s(e).errors.Cuantas_u},null,8,["message"])]),d("div",oe,[t(m,{for:"Cuantas_t",value:l.lang().label.Cuantas_temas+" por unidad",class:"text-sm"},null,8,["value"]),t(b,{name:"Cuantas_t",type:"number",min:"1",max:"9",class:"mt-1 block w-full",modelValue:s(e).Cuantas_t,"onUpdate:modelValue":n[3]||(n[3]=o=>s(e).Cuantas_t=o)},null,8,["modelValue"]),t(u,{class:"mt-2",message:s(e).errors.Cuantas_t},null,8,["message"])])]),d("p",ne,"Elementos generados: "+g(s(e).totalUT),1),R(d("div",ie,[d("div",de,[t(m,{for:"nombre_mat",value:l.lang().label.nombre_mat},null,8,["value"]),t(b,{id:"nombre_mat",type:"text",modelValue:s(e).nombre_mat,"onUpdate:modelValue":n[4]||(n[4]=o=>s(e).nombre_mat=o),required:"",placeholder:l.lang().placeholder.nombre_mat,error:s(e).errors.nombre_mat,class:v([a!=null&&a.ValoresGenerarMateria?"bg-gray-50":"bg-gray-300 invisible","text-center text-2xl mt-1 block w-full"])},null,8,["modelValue","placeholder","error","class"]),t(u,{class:"mt-2",message:s(e).errors.nombre_mat},null,8,["message"])]),d("div",ue,[t(m,{for:"",value:l.lang().label.objetivo},null,8,["value"]),t(b,{id:"objetivo",type:"text",modelValue:s(e).objetivo,"onUpdate:modelValue":n[5]||(n[5]=o=>s(e).objetivo=o),required:"",placeholder:l.lang().placeholder.objetivo,class:v([a!=null&&a.ValoresGenerarMateria?"bg-gray-50":"bg-gray-300 invisible","mt-1 block w-full"])},null,8,["modelValue","placeholder","class"]),t(u,{class:"mt-2",message:s(e).errors.objetivo},null,8,["message"])])],512),[[w,a==null?void 0:a.ValoresGenerarMateria]]),a!=null&&a.ValoresGenerarMateria&&(a!=null&&a.ValoresGenerarMateria.funciono)?(c(!0),_(x,{key:0},G(s(e).nombre_unidad.length,(o,i)=>(c(),_("div",{key:i,class:"my-6 grid grid-cols-1 sm:grid-cols-6 gap-6"},[d("div",me,[t(m,{for:"nombre_unidad"+i,value:" ---- "+l.lang().label.nombre_unidad+" "+(i+1)+" ---- ",class:"text-xl my-2 text-center"},null,8,["for","value"]),t(b,{id:"nombre_unidad"+i,type:"text",modelValue:s(e).nombre_unidad[i],"onUpdate:modelValue":A=>s(e).nombre_unidad[i]=A,required:"",placeholder:l.lang().placeholder.nombre_unidad,class:v([a!=null&&a.ValoresGenerarMateria?"bg-gray-50":"bg-gray-300 disabled","mt-1 block w-full text-center"])},null,8,["id","modelValue","onUpdate:modelValue","placeholder","class"]),t(u,{class:"mt-2",message:s(e).errors.nombre_unidad},null,8,["message"])]),(c(!0),_(x,null,G(s(e).Array_nombre_tema[i],(A,p)=>(c(),_("div",{key:p,class:"col-span-3"},[t(m,{for:"Array_nombre_tema",value:l.lang().label.Array_nombre_tema+" "+(i*s(e).Array_nombre_tema.length+(p+1))},null,8,["value"]),t(b,{id:"Array_nombre_tema",type:"text",class:"mt-1 block w-full",modelValue:s(e).Array_nombre_tema[i][p],"onUpdate:modelValue":h=>s(e).Array_nombre_tema[i][p]=h,required:"",placeholder:l.lang().placeholder.Array_nombre_tema},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(u,{class:"mt-2",message:s(e).errors.Array_nombre_tema},null,8,["message"]),t(m,{for:"Array_RA",value:l.lang().label.Array_RA,class:"mt-3"},null,8,["value"]),t(b,{id:"Array_RA",type:"text",class:"mt-2 block w-full",modelValue:s(e).Array_RA[i][p],"onUpdate:modelValue":h=>s(e).Array_RA[i][p]=h,required:"",placeholder:l.lang().placeholder.Array_RA},null,8,["modelValue","onUpdate:modelValue","placeholder"]),t(u,{class:"mt-2",message:s(e).errors.Array_RA},null,8,["message"])]))),128))]))),128)):C("",!0),r.recuerdeCodigo?(c(),_("p",ce,g(r.recuerdeCodigo),1)):C("",!0),r.errorCarrera?(c(),_("p",_e,g(r.errorCarrera),1)):C("",!0),d("div",ge,[t(J,{disabled:s(e).processing,onClick:n[6]||(n[6]=o=>(f("close"),s(e).reset(),j()))},{default:V(()=>[S(g(l.lang().button.close),1)]),_:1},8,["disabled"]),R(t(P,{class:v(["ml-3",{"opacity-25":s(e).processing}]),disabled:s(e).processing,onClick:M},{default:V(()=>[S(g(s(e).processing?"Guardar...":"Guardar"),1)]),_:1},8,["class","disabled"]),[[w,a==null?void 0:a.ValoresGenerarMateria]]),t(Y,{class:v(["ml-3",{"opacity-25":r.mostrarLoader}]),disabled:r.mostrarLoader,onClick:k},{default:V(()=>[S(g(r.mostrarLoader?"Pensando...":"Generar"),1)]),_:1},8,["class","disabled"]),r.mostrarLoader?(c(),D(W,{key:0})):C("",!0)])],40,ee)]),_:1},8,["show"])]))}};export{Se as default};
