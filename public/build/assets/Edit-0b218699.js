import{r as $,v as N,w as j,c,b as i,f as g,k as m,d as n,t as d,u as a,F as b,h as k,m as E,A as V,g as B,l as v,q as F,e as A}from"./app-8190fc74.js";import{_ as D}from"./InputError-1b18cc94.js";import{_ as h}from"./InputLabel-668bb308.js";import{_ as M,a as O}from"./Modal-41b4ce14.js";import{_ as U}from"./PrimaryButton-ea2d3d80.js";import{_ as q}from"./Checkbox-d34488cd.js";const z={class:"space-y-6"},L=["onSubmit"],P={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},T={class:"my-6 space-y-4"},G={class:"flex justify-start items-center space-x-2 mt-2"},H={key:0,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},I=["id","value"],J=n("hr",{class:"border-b my-4"},null,-1),K={class:"flex justify-end"},ee={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(y,{emit:u}){const r=y,o=$({multipleSelect:!1,tipoPermiso:["create","read","update","delete","cambiarNombre","puro"]}),e=N({name:"",permissions:[]}),_=()=>{var s;e.put(route("role.update",(s=r.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{u("close"),e.reset(),o.multipleSelect=!1},onError:()=>null,onFinish:()=>null})};j(()=>{var s,l,t;r.show&&(e.errors={},e.name=(s=r.role)==null?void 0:s.name,e.permissions=(l=r.role.permissions)==null?void 0:l.map(f=>f.id)),r.permissions.length==((t=r.role)==null?void 0:t.permissions.length)?o.multipleSelect=!0:o.multipleSelect=!1});const S=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],r.permissions.forEach(l=>{e.permissions.push(l.id)}))},w=()=>{r.permissions.length==e.permissions.length?o.multipleSelect=!0:o.multipleSelect=!1};return(s,l)=>(m(),c("section",z,[i(M,{show:r.show,onClose:l[3]||(l[3]=t=>u("close"))},{default:g(()=>[n("form",{class:"p-6",onSubmit:A(_,["prevent"])},[n("h2",P,d(s.lang().label.edit)+" "+d(r.title)+" "+d(a(e).name),1),n("div",T,[n("div",null,[i(h,{value:s.lang().label.permission},null,8,["value"]),i(D,{class:"mt-2",message:a(e).errors.permissions},null,8,["message"]),n("div",G,[i(q,{id:"permission-all",checked:o.multipleSelect,"onUpdate:checked":l[0]||(l[0]=t=>o.multipleSelect=t),onChange:S},null,8,["checked"]),i(h,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),(m(!0),c(b,null,k(o.tipoPermiso,(t,f)=>(m(),c("div",{key:f},[t!="cambiarNombre"?(m(),c("div",H,[(m(!0),c(b,null,k(r.permissions[t],(p,x)=>(m(),c("div",{class:"flex items-center justify-start space-x-2",key:x},[E(n("input",{onChange:w,class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+p.id,value:p.id,"onUpdate:modelValue":l[1]||(l[1]=C=>a(e).permissions=C)},null,40,I),[[V,a(e).permissions]]),i(h,{for:"permission_"+p.id,value:p.name},null,8,["for","value"])]))),128))])):B("",!0),J]))),128))])]),n("div",K,[i(O,{disabled:a(e).processing,onClick:l[2]||(l[2]=t=>u("close"))},{default:g(()=>[v(d(s.lang().button.close),1)]),_:1},8,["disabled"]),i(U,{class:F(["ml-3",{"opacity-25":a(e).processing}]),disabled:a(e).processing,onClick:_},{default:g(()=>[v(d(a(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,L)]),_:1},8,["show"])]))}};export{ee as default};
