import{k as S,v as w,m as x,f as p,a as o,w as u,o as f,b as a,t as c,u as r,F as C,x as $,q as j,B,d as h,n as E,e as V}from"./app-fa012e40.js";import{_ as F}from"./InputError-bab8a326.js";import{_ as g}from"./InputLabel-0db2c892.js";import{_ as N,a as D}from"./SecondaryButton-8bd0ef43.js";import{_ as M}from"./PrimaryButton-f0e54c8a.js";import{_ as O}from"./Checkbox-43286906.js";const U={class:"space-y-6"},q=["onSubmit"],z={class:"text-lg font-medium text-gray-900 dark:text-gray-100"},A={class:"my-6 space-y-4"},L={class:"flex justify-start items-center space-x-2 mt-2"},T={class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 mt-2"},G=["id","value"],H={class:"flex justify-end"},W={__name:"Edit",props:{show:Boolean,title:String,role:Object,permissions:Object},emits:["close"],setup(v,{emit:m}){const t=v,n=S({multipleSelect:!1}),e=w({name:"",permissions:[]}),_=()=>{var s;e.put(route("role.update",(s=t.role)==null?void 0:s.id),{preserveScroll:!0,onSuccess:()=>{m("close"),e.reset(),n.multipleSelect=!1},onError:()=>null,onFinish:()=>null})};x(()=>{var s,l,i;t.show&&(e.errors={},e.name=(s=t.role)==null?void 0:s.name,e.permissions=(l=t.role.permissions)==null?void 0:l.map(d=>d.id)),t.permissions.length==((i=t.role)==null?void 0:i.permissions.length)?n.multipleSelect=!0:n.multipleSelect=!1});const k=s=>{s.target.checked===!1?e.permissions=[]:(e.permissions=[],t.permissions.forEach(l=>{e.permissions.push(l.id)}))},b=()=>{t.permissions.length==e.permissions.length?n.multipleSelect=!0:n.multipleSelect=!1};return(s,l)=>(f(),p("section",U,[o(N,{show:t.show,onClose:l[3]||(l[3]=i=>m("close"))},{default:u(()=>[a("form",{class:"p-6",onSubmit:V(_,["prevent"])},[a("h2",z,c(s.lang().label.edit)+" "+c(t.title)+" "+c(r(e).name),1),a("div",A,[a("div",null,[o(g,{value:s.lang().label.permission},null,8,["value"]),o(F,{class:"mt-2",message:r(e).errors.permissions},null,8,["message"]),a("div",L,[o(O,{id:"permission-all",checked:n.multipleSelect,"onUpdate:checked":l[0]||(l[0]=i=>n.multipleSelect=i),onChange:k},null,8,["checked"]),o(g,{for:"permission-all",value:s.lang().label.check_all},null,8,["value"])]),a("div",T,[(f(!0),p(C,null,$(t.permissions,(i,d)=>(f(),p("div",{class:"flex items-center justify-start space-x-2",key:d},[j(a("input",{onChange:b,class:"rounded dark:bg-gray-900 border-gray-300 dark:border-gray-700 text-primary dark:text-primary shadow-sm focus:ring-primary/80 dark:focus:ring-primary dark:focus:ring-offset-gray-800 dark:checked:bg-primary dark:checked:border-primary",type:"checkbox",id:"permission_"+i.id,value:i.id,"onUpdate:modelValue":l[1]||(l[1]=y=>r(e).permissions=y)},null,40,G),[[B,r(e).permissions]]),o(g,{for:"permission_"+i.id,value:i.name},null,8,["for","value"])]))),128))])])]),a("div",H,[o(D,{disabled:r(e).processing,onClick:l[2]||(l[2]=i=>m("close"))},{default:u(()=>[h(c(s.lang().button.close),1)]),_:1},8,["disabled"]),o(M,{class:E(["ml-3",{"opacity-25":r(e).processing}]),disabled:r(e).processing,onClick:_},{default:u(()=>[h(c(r(e).processing?s.lang().button.save+"...":s.lang().button.save),1)]),_:1},8,["class","disabled"])])],40,q)]),_:1},8,["show"])]))}};export{W as default};
